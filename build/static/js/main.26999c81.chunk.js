(this["webpackJsonpxstate-react-typescript-template"]=this["webpackJsonpxstate-react-typescript-template"]||[]).push([[0],{29:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var o=n(26),a=n(4),r=(n(29),n(8),n(23)),s=n(11),c=n(20),i=n(2),p=n(44),l=n(43);const u=s.a.send;s.a.cancel;function m(e){return u((t=>({type:"SPEAK",value:e})))}const y={John:{person:"John Appleseed"},Jamal:{person:"Jamal Youssef"},Jennifer:{person:"Jennifer Lawrence"},Sophia:{person:"Sophia Bush"},Morgan:{person:"Morgan Freeman"},Tom:{person:"Tom Hanks"},"on Monday":{day:"Monday"},"on Tuesday":{day:"Tuesday"},"on Wednesday":{day:"Wednesday"},"on Thursday":{day:"Thursday"},"on Friday":{day:"Friday"},"at 6":{time:"6 am"},"at 7":{time:"7 am"},"at 8":{time:"8 am"},"at 9":{time:"9 am"},"at 10":{time:"10 am"},"at 11":{time:"11 am"},"at 12":{time:"12 pm"}},d={yes:{yes_no:!0},"yes, please":{yes_no:!0},"of course":{yes_no:!0},"no doubt":{yes_no:!0},absolutely:{yes_no:!0},yep:{yes_no:!0},"I do":{yes_no:!0},"go ahead":{yes_no:!0},no:{yes_no:!1},"no, I don't":{yes_no:!1},"no way":{yes_no:!1},"of course not":{yes_no:!1},nope:{yes_no:!1},"hell not":{yes_no:!1},"not sure":{yes_no:!1}};function g(){return{actions:Object(i.b)((e=>({counts:e.counts?e.counts+1:1}))),cond:e=>null==e.counts||e.counts<3}}function b(){return{actions:Object(i.b)((e=>({counts:0}))),cond:e=>e.counts>=3}}function h(e,t){return{initial:"prompt",states:{prompt:{entry:e,on:{ENDSPEECH:"ask"}},ask:{entry:[u("LISTEN"),u("MAXSPEECH",{delay:5e3,id:"countdown"})]},reprompt:{entry:t,on:{ENDSPEECH:"ask"}},finalReprompt:{entry:m("You do not seem to be here, I guess we'll talk later then, see you!"),on:{ENDSPEECH:"#appointment.start.init"}}}}}const O={initial:"start",id:"appointment",states:{start:{initial:"init",states:{hist:{type:"history"},init:{on:{CLICK:"welcome"}},welcome:{initial:"prompt",on:{ENDSPEECH:"who"},states:{prompt:{entry:m("Let's create an appointment")}}},who:Object(a.a)({on:{RECOGNISED:[{target:"#appointment.help",cond:e=>"help"===e.recResult},{cond:e=>"person"in(y[e.recResult]||{}),actions:Object(i.b)((e=>({person:y[e.recResult].person}))),target:"day"},{target:".reprompt"}],MAXSPEECH:[Object(a.a)(Object(a.a)({},g()),{},{target:".reprompt"}),Object(a.a)(Object(a.a)({},b()),{},{target:".finalReprompt"})]}},h(m("Who are you meeting with?"),m("You haven't responded yet! Would you please tell us, who you're meeting with?"))),day:Object(a.a)({on:{RECOGNISED:[{target:"#appointment.help",cond:e=>"help"===e.recResult},{cond:e=>"day"in(y[e.recResult]||{}),actions:Object(i.b)((e=>({day:y[e.recResult].day}))),target:"whole_day"},{target:".reprompt"}],MAXSPEECH:[Object(a.a)(Object(a.a)({},g()),{},{target:".reprompt"}),Object(a.a)(Object(a.a)({},b()),{},{target:".finalReprompt"})]}},h(u((e=>({type:"SPEAK",value:"OK. ".concat(e.person,". On which day is your meeting?")}))),u((e=>({type:"SPEAK",value:"You haven't responded yet! Now, please choose on which day you want to meet ".concat(e.person,".")}))))),whole_day:Object(a.a)({on:{RECOGNISED:[{target:"#appointment.help",cond:e=>"help"===e.recResult},{cond:e=>!!d[e.recResult]&&!0===d[e.recResult].yes_no,target:"confirm_whole_day"},{cond:e=>!!d[e.recResult]&&!1===d[e.recResult].yes_no,target:"time"},{target:".reprompt"}],MAXSPEECH:[Object(a.a)(Object(a.a)({},g()),{},{target:".reprompt"}),Object(a.a)(Object(a.a)({},b()),{},{target:".finalReprompt"})]}},h(m("Will it take the whole day?"),m("You haven't responded yet! Would you please confirm if your meeting is going to last for the whole day?"))),confirm_whole_day:Object(a.a)({initial:"prompt",on:{RECOGNISED:[{target:"#appointment.help",cond:e=>"help"===e.recResult},{cond:e=>!!d[e.recResult]&&!0===d[e.recResult].yes_no,target:"confirm_appointment"},{cond:e=>!!d[e.recResult]&&!1===d[e.recResult].yes_no,target:"who"},{target:".reprompt"}],MAXSPEECH:[Object(a.a)(Object(a.a)({},g()),{},{target:".reprompt"}),Object(a.a)(Object(a.a)({},b()),{},{target:".finalReprompt"})]}},h(u((e=>({type:"SPEAK",value:"Do you want me to create an appointment with ".concat(e.person," \n                                    on ").concat(e.day," for the whole day?")}))),u((e=>({type:"SPEAK",value:"\"You haven't responded yet! Would you please confirm your appointment details?\n                            I will create an appointment with ".concat(e.person," on ").concat(e.day," for the whole day, does that work for you?")}))))),time:Object(a.a)({initial:"prompt",on:{RECOGNISED:[{target:"#appointment.help",cond:e=>"help"===e.recResult},{cond:e=>"time"in(y[e.recResult]||{}),actions:Object(i.b)((e=>({time:y[e.recResult].time}))),target:"confirm_time_appointment"},{target:".reprompt"}],MAXSPEECH:[Object(a.a)(Object(a.a)({},g()),{},{target:".reprompt"}),Object(a.a)(Object(a.a)({},b()),{},{target:".finalReprompt"})]}},h(m("What time is your meeting?"),m("What time is your meeting?"))),confirm_time_appointment:Object(a.a)({initial:"prompt",on:{RECOGNISED:[{target:"#appointment.help",cond:e=>"help"===e.recResult},{cond:e=>!!d[e.recResult]&&!0===d[e.recResult].yes_no,target:"confirm_appointment"},{cond:e=>!!d[e.recResult]&&!1===d[e.recResult].yes_no,target:"who"},{target:".reprompt"}],MAXSPEECH:[Object(a.a)(Object(a.a)({},g()),{},{target:".reprompt"}),Object(a.a)(Object(a.a)({},b()),{},{target:".finalReprompt"})]}},h(u((e=>({type:"SPEAK",value:"Do you want me to create an appointment with ".concat(e.person," \n                                            on ").concat(e.day," at ").concat(e.time,"?")}))),u((e=>({type:"SPEAK",value:"\"You haven't responded yet! Would you please confirm your appointment details?\n                            I will create an appointment with ".concat(e.person," on ").concat(e.day," at ").concat(e.time,", does that work for you?")}))))),confirm_appointment:{entry:m("Your appointment has been created! See you!"),on:{ENDSPEECH:"#appointment.start.init"}}}},help:{entry:m("Don't panic, we can go one step back!"),on:{ENDSPEECH:"start.hist"}}}};var E=n(22),j=n(13);const R=s.a.send,S=s.a.cancel;Object(l.a)({url:"https://statecharts.io/inspect",iframe:!1});const w=Object(c.a)({id:"root",type:"parallel",states:{dm:Object(a.a)({},O),asrtts:{initial:"idle",states:{idle:{on:{LISTEN:"recognising",SPEAK:{target:"speaking",actions:Object(i.b)(((e,t)=>({ttsAgenda:t.value})))}}},recognising:{initial:"progress",entry:"recStart",exit:"recStop",on:{ASRRESULT:{actions:["recLogResult",Object(i.b)(((e,t)=>({recResult:t.value})))],target:".match"},RECOGNISED:{target:"idle",actions:[S("countdown"),Object(i.b)((e=>({counts:0})))]},MAXSPEECH:"idle"},states:{progress:{},match:{entry:R("RECOGNISED")}}},speaking:{entry:"ttsStart",on:{ENDSPEECH:"idle"}}}}}},{actions:{recLogResult:e=>{console.log("<< ASR: "+e.recResult)},test:()=>{console.log("test")},logIntent:e=>{console.log("<< NLU intent: "+e.nluData.intent.name)}}}),f=e=>{switch(!0){case e.state.matches({asrtts:"recognising"}):return Object(j.jsx)("button",Object(a.a)(Object(a.a)({type:"button",className:"glow-on-hover",style:{animation:"glowing 20s linear"}},e),{},{children:"Listening..."}));case e.state.matches({asrtts:"speaking"}):return Object(j.jsx)("button",Object(a.a)(Object(a.a)({type:"button",className:"glow-on-hover",style:{animation:"bordering 1s infinite"}},e),{},{children:"Speaking..."}));default:return Object(j.jsx)("button",Object(a.a)(Object(a.a)({type:"button",className:"glow-on-hover"},e),{},{children:"Click to start"}))}};function _(){const e=Object(E.useSpeechSynthesis)({onEnd:()=>{u("ENDSPEECH")}}),t=e.speak,n=e.cancel,a=(e.speaking,Object(E.useSpeechRecognition)({onResult:e=>{u({type:"ASRRESULT",value:e})}})),r=a.listen,s=(a.listening,a.stop),c=Object(p.b)(w,{devTools:!0,actions:{recStart:Object(p.a)((()=>{console.log("Ready to receive a command."),r({interimResults:!1,continuous:!0})})),recStop:Object(p.a)((()=>{console.log("Recognition stopped."),s()})),changeColour:Object(p.a)((e=>{console.log("Repainting..."),document.body.style.background=e.recResult})),ttsStart:Object(p.a)(((e,n)=>{console.log("Speaking..."),t({text:e.ttsAgenda})})),ttsCancel:Object(p.a)(((e,t)=>{console.log("TTS STOP..."),n()}))}}),i=Object(o.a)(c,3),l=i[0],u=i[1];i[2];return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(f,{state:l,onClick:()=>u("CLICK")})})}const C=document.getElementById("root");r.render(Object(j.jsx)(_,{}),C)}},[[40,1,2]]]);
//# sourceMappingURL=main.26999c81.chunk.js.map